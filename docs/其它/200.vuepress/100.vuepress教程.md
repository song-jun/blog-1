---
title: vuepress教程
permalink: /vuepress-usage.html
date: 2020-06-05 10:38:12
categories:
  - 其它
  - vuepress
tags:
  -
---

[[toc]]

## 1. 生成目录

### 1.1 声明目录生成标记

文档正文起始处加入一行如下内容

```
[[toc]]
```

### 1.2. 修改配置

修改 markdown.toc.includeLevel 为[1, 2, 3, 5]

```
module.exports = {
  title: "王世彪的博客",
  description: "王世彪的博客, 干货满满",

  markdown: {
    toc: {
        includeLevel:[1, 2, 3, 4]
    }
  }
};
```

::: tip 注意
includeLevel 默认值为[2, 3], 所以不显示一级标题
:::

### 1.3. 重新编译

## 2. 搜索

内置搜索只会为页面的**标题、h2 、 h3 以及 tags** 构建搜索索引。 如果你需要全文搜索，你可以使用 Algolia 搜索

## 3. 代码块增加"拷贝"按钮

见https://github.com/znicholasbrown/vuepress-plugin-code-copy

## 4. 侧边栏

侧边栏是按照"本地文档的实际目录结构"进行定义,不关心文档的实际 url 访问路径
::: tip 注意
h1 标题不会生成在侧边栏
:::
可以将文档随意分组, 见官方文档的"侧边栏分组"<br>
若想对侧边栏进行分类, 即不同类别的文档显示不同的侧边栏, 见官方文档的"多个侧边栏"
::: tip 注意
若想对侧边栏进行分类, 必须以目录结构进行分类, 即相同类别的文档的根目录是相同的
:::

## 5. 部署到 github

见https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages

### 5.1 自定义域名

#### 5.1.1 创建 cname 域名

到域名管理页面, 创建 cname 域名(如 blog.sofineday.com), 绑定到 github 域名(如 wangshibiaoflytiger.github.io)

#### 5.1.2 修改配置文件

修改 base 配置

```
base: "/"
```

## 9. 支持评论

::: tip
市面上也有其他的选型, 如 gitalk,vssue 等, 但需要用户登录才能发表评论, 且 github 经常无法链接,导致体验非常差<br>
最终选用 valine+leancloud, 支持匿名评论，缺点是数据没有存储在自己手里
:::

> [参考文档](https://github.com/dongyuanxin/vuepress-plugin-comment)

### 9.1 注册 leancloud

- 注册[leancloud](https://leancloud.cn)账号,创建应用
- 复制 AppID 和 AppKey
  ![20200603172452.png](https://cdn.jsdelivr.net/gh/wangshibiaoFlytiger/blog_picBed1/images/20200603172452.png)

::: tip
可通过 leancloud 后台管理评论内容
:::

### 9.2 添加评论插件

- yarn add vuepress-plugin-comment -D
- vi ./config.js

```
// 评论插件
[
  "vuepress-plugin-comment",
  {
    choosen: "valine",
    // options选项中的所有参数，会传给Valine的配置
    options: {
      el: "#valine-vuepress-comment",
      appId: "cxPSbJA9SE1uXWt0ywBRl0Cr-gzGzoHsz",
      appKey: "jKPdKyf3rUlfcVV03gPyBSd1",
      path: '<%- frontmatter.to.path %>'
    }
  }
]
```

::: tip 注意
若不配置 path，则切换页面时评论内容不会刷新
:::
