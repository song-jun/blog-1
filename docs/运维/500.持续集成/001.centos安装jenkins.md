---
title: centos安装jenkins
permalink: /centos-install-jenkins.html
date: 2020-07-20 11:53:29
categories:
  - 运维
  - 持续集成
tags:
  -
---

# centos 安装 jenkins

## 安装 jenkins

开放端口 8080
rpm -ivh ./jdk-7u45-linux-x64.rpm  
sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo  
sudo rpm --import http://pkg.jenkins-ci.org/redhat-stable/jenkins-ci.org.key  
yum install jenkins  
service jenkins start

```tip
要求git版本为1.8以上, 若系统默认仓库的git版本不符合要求，可使用如下方法安装高版本git。
```

vi /etc/yum.repos.d/PUIAS_6_computational.repo

```
[PUIAS_6_computational]
name=PUIAS computational Base $releasever - $basearch
mirrorlist=http://puias.math.ias.edu/data/puias/computational/$releasever/$basearch/mirrorlist
#baseurl=http://puias.math.ias.edu/data/puias/computational/$releasever/$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-puias
```

wget -O /etc/pki/rpm-gpg/RPM-GPG-KEY-puias http://springdale.math.ias.edu/data/puias/6/x86_64/os/RPM-GPG-KEY-puias  
rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-puias  
yum install git //安装 1.8 以上版本 git

## 使用 jenkins

访问 jenkins 服务http://服务IP:8080/  
Manage Jenkins->Manage Plugins->Available 安装如下插件:

- Git Server Plugin
- Git Client Plugin
- Gitlab Merge Request Builder Plugin
- Gitlab Hook Plugin
- Git Plugin

## 自动构建

有 2 种方法：

- Jenkins 主动检测版本库状态以决定是否重新构建  
  通过 jenkins 的构建触发器。
- 当版本库需要构件时，git 服务器主动通知 jenkins 执行构建  
  通过 gitlab 的 Web Hooks。

## ssh 免登陆

ssh-keygen -t rsa  
ssh-copy-id -i /root/.ssh/id_rsa.pub root@服务器 IP  
jenkins 脚本中使用 ssh 命令，需要加-tt 参数
