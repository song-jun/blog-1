---
title: linux使用Systemd管理系统服务
date: 2020-06-29 23:27:44
permalink: /linux-Systemd-service.html
categories:
  - linux
tags:
  -
---

# linux 使用 Systemd 管理系统服务

传统的 linux 系统服务管理采用的是 init 脚本(如 centos 6), 如今主流的管理方式是使用 Systemd。  
Systemd 支持服务进程死掉后自动重启。  
::: tip
Systemd 管理工具的功能相当强大，可以管理系统的很多方面，“管理系统服务”仅仅是它的其中 1 项功能。  
本文仅用最简单的方法介绍如何使用 Systemd 管理系统服务。详细用法请见[Systemd 教程](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)。
:::

## 约定

本文所描述的服务，命令行启动方式为/root/redirect-api --profile back-test  
服务的名称为 redirect。

## 创建系统服务配置文件

vi /usr/lib/systemd/system/**redirect**.service

```
[Unit]
# 单元描述
Description=跳转服务

[Service]
Type=simple
# 启动的脚本命令
ExecStart=/root/redirect-api --profile back-test
# 重启条件
Restart=always
# 几秒后重启
RestartSec=5

[Install]
WantedBy=multi-user.target
```

## 设置服务随系统启动

systemctl enable **redirect**
::: tip
systemctl enable **redirect** 等同于如下命令，仅是创建一个链接  
ln -s /usr/lib/systemd/system/**redirect**.service /etc/systemd/system/multi-user.target.wants/**redirect**.service
:::

## 启动服务

systemctl start **redirect**

## 停止服务

systemctl stop **redirect**

## 查看服务日志

journalctl -u **redirect**

## 查看系统服务配置文件

systemctl cat **redirect**

## [参考文档](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)
