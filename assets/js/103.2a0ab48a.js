(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{599:function(r,s,o){"use strict";o.r(s);var n=o(26),a=Object(n.a)({},(function(){var r=this,s=r.$createElement,o=r._self._c||s;return o("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[o("h1",{attrs:{id:"创建-sonarqube-docker-服务"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#创建-sonarqube-docker-服务"}},[r._v("#")]),r._v(" 创建 sonarqube docker 服务")]),r._v(" "),o("h2",{attrs:{id:"准备文件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#准备文件"}},[r._v("#")]),r._v(" 准备文件")]),r._v(" "),o("p",[r._v("/root/jdk-8u77-linux-x64.rpm"),o("br"),r._v("\n/root/sonarqube-6.5.zip -d /root")]),r._v(" "),o("h2",{attrs:{id:"创建构建脚本"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#创建构建脚本"}},[r._v("#")]),r._v(" 创建构建脚本")]),r._v(" "),o("p",[r._v("vi /root/Dockerfile")]),r._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[r._v('FROM hub.c.163.com/library/centos:7.1.1503\n\nEXPOSE 80\nADD ./sonarqube-6.5.zip /root/\nADD ./jdk-8u77-linux-x64.rpm /root/\nRUN rpm -ivh /root/jdk-8u77-linux-x64.rpm\nRUN yum install unzip -y\nRUN unzip /root/sonarqube-6.5.zip -d /root\nRUN sed -i "s/#sonar.web.port=9000/sonar.web.port=80/g" /root/sonarqube-6.5/conf/sonar.properties\nRUN sed -i "s/#sonar.jdbc.url=jdbc:mysql:\\/\\/localhost/sonar.jdbc.url=jdbc:mysql:\\/\\/10.96.15.198/g" /root/sonarqube-6.5/conf/sonar.properties\nRUN sed -i "s/#sonar.jdbc.username=/sonar.jdbc.username=root/g" /root/sonarqube-6.5/conf/sonar.properties\nRUN sed -i "s/#sonar.jdbc.password=/sonar.jdbc.password=123456/g" /root/sonarqube-6.5/conf/sonar.properties\nRUN sed -i "s/#sonar.jdbc.url=jdbc:mysql/sonar.jdbc.url=jdbc:mysql/g" /root/sonarqube-6.5/conf/sonar.properties\n\nENTRYPOINT /root/sonarqube-6.5/bin/linux-x86-64/sonar.sh start && /bin/bash\n')])])]),o("h2",{attrs:{id:"执行构建"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#执行构建"}},[r._v("#")]),r._v(" 执行构建")]),r._v(" "),o("ul",[o("li",[r._v("创建镜像"),o("br"),r._v("\ndocker build -t sonarqube:v1 /root")]),r._v(" "),o("li",[r._v("创建并运行容器"),o("br"),r._v("\ndocker run -itd -p 80:80 --name sonarqube sonarqube:v1")]),r._v(" "),o("li",[r._v("访问容器服务"),o("br"),r._v(" "),o("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangshibiaoFlytiger/blog_picBed1/images/20200713121742.png",alt:"20200713121742.png"}})])])])}),[],!1,null,null,null);s.default=a.exports}}]);