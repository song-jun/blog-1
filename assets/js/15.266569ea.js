(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{513:function(e,a,t){"use strict";t.r(a);var s=t(26),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"linux-查看-cpu-和内存占用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-查看-cpu-和内存占用"}},[e._v("#")]),e._v(" linux 查看 cpu 和内存占用")]),e._v(" "),t("h2",{attrs:{id:"top"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#top"}},[e._v("#")]),e._v(" top")]),e._v(" "),t("p",[e._v("top 命令可以同时查看 cpu 和内存使用情况")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("top - 14:09:53 up  4:29,  6 users,  load average: 1.10, 0.93, 0.69\nTasks: 309 total,   1 running, 307 sleeping,   0 stopped,   1 zombie\n%Cpu(s):  1.6 us,  6.6 sy,  1.0 ni, 90.0 id,  0.5 wa,  0.0 hi,  0.2 si,  0.0 st\nKiB Mem : 16336104 total,   547904 free,  9164624 used,  6623576 buff/cache\nKiB Swap:  3905532 total,  3893976 free,    11556 used.  6312108 avail Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\n11075 wangshi+  20   0 5820888 3.101g 2.997g S  23.8 19.9  60:14.94 VirtualBoxVM\n 1966 root      20   0  554264 156284  80680 S   2.6  1.0   5:19.19 Xorg\n 3833 wangshi+  20   0 3264888 126952  67944 S   2.6  0.8   5:29.31 kwin_x11\n 8317 wangshi+  20   0 6227920 970480  72868 S   2.3  5.9   3:58.14 java\n")])])]),t("h2",{attrs:{id:"htop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#htop"}},[e._v("#")]),e._v(" htop")]),e._v(" "),t("p",[e._v("htop 是 top 的升级版，可以图形化形式显示，更直观。但是系统默认不会安装。\n"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangshibiaoFlytiger/blog_picBed1/images/20200619141211.png",alt:"20200619141211.png"}})]),e._v(" "),t("h2",{attrs:{id:"free-命令查看内存占用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#free-命令查看内存占用"}},[e._v("#")]),e._v(" free 命令查看内存占用")]),e._v(" "),t("p",[e._v("free -h")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(py3.6) wangshibiao@wangshibiao:~$ free -h\n              total        used        free      shared  buff/cache   available\nMem:            15G        8.9G        425M        372M        6.2G        5.8G\nSwap:          3.7G         11M        3.7G\n(py3.6) wangshibiao@wangshibiao:~$\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("从应用程序角度看，真正剩余内存并非 free 列的值，而是 available 列的值"),t("br"),e._v("\navailable 不仅包含未使用内存，还包括了可回收的缓存，所以一般会比未使用内存更大。不过，并不是所有缓存都可以回收，因为有些缓存可能正在使用中。公式如下："),t("br"),e._v("\navailable = free + （buff/cache 通过一个算法后产生的值）")])]),e._v(" "),t("h2",{attrs:{id:"一条命令查看-cpu-和内存使用率"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一条命令查看-cpu-和内存使用率"}},[e._v("#")]),e._v(" 一条命令查看 cpu 和内存使用率")]),e._v(" "),t("p",[e._v("echo -e $(top -n 2 | grep Cpu | tail -n 1 | sed 's/ //g' | awk -F , '{print $4}' | awk -F 'id' '{print \"CpuFree:\"$1\"%\"}')'\\nMemFree:'$(MemFree=$(($(cat /proc/meminfo | egrep \"MemFree\" | sed 's/[^0-9]//g')+$(cat /proc/meminfo | egrep \"Buffers\" | sed 's/[^0-9]//g')+$(cat /proc/meminfo | egrep \"^Cached\" | sed 's/[^0-9]//g'))) && MemTotal=$(cat /proc/meminfo | egrep \"MemTotal\" | sed 's/[^0-9]//g') && awk 'BEGIN{printf \"%.2f%\\n\", '$MemFree/$MemTotal*100'}')")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(py3.6) wangshibiao@wangshibiao:~$ echo -e $(top -n 2 | grep Cpu | tail -n 1 | sed 's/ //g' | awk -F , '{print $4}' | awk -F 'id' '{print \"CpuFree:\"$1\"%\"}')'\\nMemFree:'$(MemFree=$(($(cat /proc/meminfo | egrep \"MemFree\" | sed 's/[^0-9]//g')+$(cat /proc/meminfo | egrep \"Buffers\" | sed 's/[^0-9]//g')+$(cat /proc/meminfo | egrep \"^Cached\" | sed 's/[^0-9]//g'))) && MemTotal=$(cat /proc/meminfo | egrep \"MemTotal\" | sed 's/[^0-9]//g') && awk 'BEGIN{printf \"%.2f%\\n\", '$MemFree/$MemTotal*100'}')\nCpuFree:85.0%\nMemFree:38.39%\n(py3.6) wangshibiao@wangshibiao:~$\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);