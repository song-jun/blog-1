(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{601:function(t,r,s){"use strict";s.r(r);var e=s(26),a=Object(e.a)({},(function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"linux-安装-docker-私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装-docker-私有仓库"}},[t._v("#")]),t._v(" linux 安装 docker 私有仓库")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("10.96.15.244 为本机 IP，具体操作需要替换为实际 IP。")])]),t._v(" "),s("h2",{attrs:{id:"安装镜像服务端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装镜像服务端"}},[t._v("#")]),t._v(" 安装镜像服务端")]),t._v(" "),s("ul",[s("li",[t._v("修改配置文件"),s("br"),t._v("\nvi /etc/docker/daemon.json")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n  "insecure-registries": ["10.96.15.244:5000"]\n}\n')])])]),s("ul",[s("li",[s("p",[t._v("运行容器 registry"),s("br"),t._v("\nsystemctl restart docker"),s("br"),t._v("\ndocker pull registry:2"),s("br"),t._v("\ndocker run -d -p 5000:5000 --restart=always -v /opt/data/registry:/var/lib/registry --name myRegistry registry:2"),s("br"),t._v("\ndocker ps")])]),t._v(" "),s("li",[s("p",[t._v("对本地镜像打 tag")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("对想要推送的镜像 打 tag。")])]),t._v(" "),s("p",[t._v("docker tag sonarqube:v4 10.96.15.244:5000/sonarqube:v4")])]),t._v(" "),s("li",[s("p",[t._v("推送本地镜像到 docker 仓库"),s("br"),t._v("\ndocker push 10.96.15.244:5000/sonarqube:v4")])]),t._v(" "),s("li",[s("p",[t._v("查看推送结果"),s("br"),t._v("\nll /opt/data/registry/"),s("br"),t._v("\ncurl -X GET http://10.96.15.244:5000/v2/_catalog"),s("br"),t._v("\ncurl -X GET http://10.96.15.244:5000/v2/sonarqube/tags/list")])])]),t._v(" "),s("h2",{attrs:{id:"docker-客户端拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-客户端拉取镜像"}},[t._v("#")]),t._v(" docker 客户端拉取镜像")]),t._v(" "),s("h3",{attrs:{id:"安装客户端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装客户端"}},[t._v("#")]),t._v(" 安装客户端")]),t._v(" "),s("p",[t._v("yum install /root/docker-ce-17.06.0.ce-1.el7.centos.x86_64.rpm -y"),s("br"),t._v("\nvi /etc/docker/daemon.json:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n"registry-mirrors": ["10.96.15.244:5000"],\n"insecure-registries": ["10.96.15.244:5000"]\n}\n')])])]),s("p",[t._v("systemctl start docker")]),t._v(" "),s("h3",{attrs:{id:"拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[t._v("#")]),t._v(" 拉取镜像")]),t._v(" "),s("p",[t._v("docker pull 10.96.15.244:5000/sonarqube:v4"),s("br"),t._v("\ndocker images"),s("br"),t._v("\ndocker run -itd -p 80:80 -v /root/sonarqube_temp/:/root/sonarqube-6.5/temp/ --name sonarqube_v4 10.96.15.244:5000/sonarqube:v4"),s("br"),t._v("\ndocker ps")])])}),[],!1,null,null,null);r.default=a.exports}}]);